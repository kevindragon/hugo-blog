---
title: "使用MobaXterm做端口转发"
date: 2023-02-24T10:53:42+08:00
tags: [SSH, MobaXterm, SSH端口转发, 端口转发]
categories: [Linux, SSH]
---

## SSH端口转发的作用

SSH端口转发是一种网络技术，它允许用户通过SSH连接到远程主机并在两个计算机之间安全地传输数据。SSH端口转发将本地端口绑定到远程主机上的一个端口，从而允许用户在本地主机上运行服务并让远程主机访问该服务。

SSH端口转发可以用于以下几种情况：

1. **安全访问远程服务**：在某些情况下，用户需要访问远程主机上的服务，但是这些服务可能不安全或未加密。使用SSH端口转发，用户可以通过SSH隧道连接到远程主机，并将本地端口绑定到远程主机上的服务端口，从而安全地访问远程服务。
2. **绕过防火墙限制**：某些网络环境下，防火墙可能会限制对某些端口的访问。使用SSH端口转发，用户可以将本地端口绑定到远程主机上的允许端口，并通过SSH隧道访问被限制的服务。
3. **远程调试应用程序**：使用SSH端口转发，开发人员可以在本地主机上运行调试器，并将本地端口绑定到远程主机上的应用程序端口，从而可以在本地主机上调试远程应用程序。

SSH端口转发是一种强大的网络技术，可以帮助用户安全地访问远程服务，绕过防火墙限制以及进行远程调试应用程序等操作。

## SSH端口转发的应用场景

SSH端口转发可以用于以下场景：

1. **访问本地服务**：在某些情况下，用户需要访问本地主机上的服务，但是该主机无法公开访问。使用SSH端口转发，用户可以将本地服务端口绑定到远程主机上的端口，从而在远程主机上访问本地服务。
2. **跳板机访问内网服务**：在企业内部网络中，某些服务可能只能在内网中访问。使用SSH端口转发，用户可以通过跳板机访问内网服务，而无需直接暴露内网服务。
3. **安全文件传输**：使用SSH端口转发，用户可以在两台主机之间安全地传输文件，而无需将文件暴露在公共网络中。

SSH端口转发是一种非常有用的网络技术，可以帮助用户在各种场景下安全地访问服务和传输数据。

## MobaXterm软件

MobaXterm是一款功能强大的终端软件，不仅支持SSH连接，还支持端口转发功能。在MobaXterm中进行端口转发非常简单，只需要在SSH会话中配置端口转发规则即可。用户可以通过MobaXterm实现安全访问远程服务、绕过防火墙限制、访问本地服务、跳板机访问内网服务以及安全文件传输等操作。

### 配置MobaXterm端口转发访问服务器内网的数据库案例

假设用户需要从本地主机访问远程服务器内网中的数据库，可以使用MobaXterm进行端口转发。首先，在MobaXterm中创建一个SSH会话到远程服务器，然后在“端口转发”选项卡中添加一个新的端口转发规则。用户需要将本地主机上任意一个端口绑定到远程服务器上的数据库端口（通常是3306），并选择“本地端口绑定到远程端口”选项。然后，用户可以在本地主机上使用数据库客户端连接到绑定的本地端口，从而访问远程服务器内网中的数据库。

1. 首先找到工具栏上的 `Tunneling` 按钮，如图1

    ![图1](/img/Linux/SSH/MobaXterm/Tunneling.png)

    图1

2. 在弹出的 `MobaSSHTunnel` 窗口的左下角点击 `New SSH tunnel` 按钮，如图2

    ![图2](/img/Linux/SSH/MobaXterm/New-SSH-tunnel.png)

    图2

3. 在弹出的配置窗口，填写本地监听的端口 `Forwarded port` ， `SSH server` `SSH login` `SSH port` ，然后是目标服务器的IP地址和端口 `Remote server` `Remote port`

    ![图3](/img/Linux/SSH/MobaXterm/SSH-Tunnel-configuration.png)

    图3

    `SSH login` 指得是登录跳板机的用户名

    可以把登录的服务器当中跳板机，把本地的端口转发到内网的其他机器

当然，还有更简单的一行命令就可以搞定的方式 😁

```bash
ssh -L local_port:remote_server:remote_port ssh_login@ssh_host_or_ip
```

| 名称 |  解释 |
| --- | --- |
| local_port | 本地监听端口 |
| remote_server | 目标服务器内网IP |
| remote_port | 目标服务器端口 |
| ssh_login | 跳板机使用用户名 |
| ssh_host_or_ip | 跳板机的host或者ip |

### Socks协议

偷偷的告诉你，还可以使用这种方式来进行socks协议的转发，这个办法可以用来科学上网哟 😀上

## 总结

SSH端口转发是一种非常有用的网络技术，可以在各种场景下帮助用户安全地访问服务和传输数据。MobaXterm是一款功能强大的终端软件，支持SSH连接和端口转发功能。在MobaXterm中进行端口转发非常简单，用户可以通过MobaXterm实现访问内网服务、安全文件传输、安全访问远程服务等操作。